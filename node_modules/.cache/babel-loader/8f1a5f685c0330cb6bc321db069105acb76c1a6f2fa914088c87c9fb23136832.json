{"ast":null,"code":"import _objectSpread from\"E:/NgonNguKichBan/ToDo_FontEnd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{DndContext,closestCenter,KeyboardSensor,PointerSensor,useSensor,useSensors}from'@dnd-kit/core';import{arrayMove,SortableContext,sortableKeyboardCoordinates,verticalListSortingStrategy}from'@dnd-kit/sortable';import SortableCard from'./SortableCard';import ListExpanded from'./ListExpanded';import{getCards,createCard,deleteList,updateCardPositions}from'../services/api';import{MoreVertical,Trash2,X}from'lucide-react';import socketService from'../services/socketService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const List=_ref=>{let{list,onDelete,dragListeners}=_ref;const[cards,setCards]=useState([]);const[showAddCard,setShowAddCard]=useState(false);const[newCardTitle,setNewCardTitle]=useState('');const[newCardDescription,setNewCardDescription]=useState('');const[newCardDueDate,setNewCardDueDate]=useState('');const[showMenu,setShowMenu]=useState(false);const[showExpanded,setShowExpanded]=useState(false);const[cardErrors,setCardErrors]=useState({});const sensors=useSensors(useSensor(PointerSensor),useSensor(KeyboardSensor,{coordinateGetter:sortableKeyboardCoordinates}));useEffect(()=>{fetchCards();// Set up WebSocket listeners for real-time card updates\nconst handleCardCreated=data=>{if(data.listId===list.id){setCards(prev=>[...prev,data.card]);}};const handleCardUpdated=data=>{if(data.listId===list.id){setCards(prev=>prev.map(card=>card.id===data.card.id?_objectSpread(_objectSpread({},card),data.card):card));}};const handleCardDeleted=data=>{if(data.listId===list.id){setCards(prev=>prev.filter(card=>card.id!==data.cardId));}};// Set up listeners\nsocketService.onCardCreated(handleCardCreated);socketService.onCardUpdated(handleCardUpdated);socketService.onCardDeleted(handleCardDeleted);// Cleanup\nreturn()=>{socketService.offCardCreated(handleCardCreated);socketService.offCardUpdated(handleCardUpdated);socketService.offCardDeleted(handleCardDeleted);};},[list.id]);const fetchCards=async()=>{try{const data=await getCards(list.id);setCards(data);}catch(error){console.error('Error fetching cards:',error);}};const validateCardForm=()=>{const newErrors={};if(!newCardTitle.trim()){newErrors.title='Card title is required';}else if(newCardTitle.length>100){newErrors.title='Card title must be less than 100 characters';}if(newCardDescription&&newCardDescription.length>500){newErrors.description='Card description must be less than 500 characters';}setCardErrors(newErrors);return Object.keys(newErrors).length===0;};const handleCreateCard=async e=>{e.preventDefault();if(!validateCardForm())return;try{const newCard=await createCard(list.id,newCardTitle.trim(),newCardDescription.trim(),'To Do',null,newCardDueDate||null);setCards([...cards,newCard]);setNewCardTitle('');setNewCardDescription('');setNewCardDueDate('');setCardErrors({});setShowAddCard(false);// Emit WebSocket event for real-time collaboration\nsocketService.emitCardCreated({boardId:list.board_id,listId:list.id,card:newCard});}catch(error){var _error$response,_error$response$data;console.error('Error creating card:',error);setCardErrors({general:'Error creating card: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Unknown error')});}};const handleDeleteCard=cardId=>{setCards(cards.filter(card=>card.id!==cardId));};const handleCardUpdate=()=>{fetchCards();// refresh cards\n};const handleDeleteList=async()=>{if(window.confirm('Are you sure you want to delete this list and all its cards?')){try{await deleteList(list.id);onDelete(list.id);}catch(error){console.error('Error deleting list:',error);}}};const handleDragEnd=async event=>{const{active,over}=event;if(active.id!==over.id){const oldIndex=cards.findIndex(card=>card.id===active.id);const newIndex=cards.findIndex(card=>card.id===over.id);const newCards=arrayMove(cards,oldIndex,newIndex);setCards(newCards);// Update positions in database\ntry{const updatedCards=newCards.map((card,index)=>({id:card.id,position:index,list_id:list.id}));await updateCardPositions(updatedCards);}catch(error){console.error('Error updating card positions:',error);// Revert on error\nsetCards(cards);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 w-72 bg-gray-100 rounded-lg p-3 relative group\",children:[dragListeners&&/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({className:\"absolute top-2 left-1 w-1 h-6 bg-gray-400 rounded cursor-grab hover:bg-gray-500 opacity-0 group-hover:opacity-100 transition-opacity\"},dragListeners),{},{title:\"Drag to reorder list\"})),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800\",children:list.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowExpanded(true),className:\"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded hover:bg-blue-50 transition\",title:\"Expand to 3-column view\",children:\"Expand\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMenu(!showMenu),className:\"text-gray-500 hover:text-gray-700 p-1\",children:/*#__PURE__*/_jsx(MoreVertical,{size:18})}),showMenu&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2 w-36 bg-white rounded-md shadow-lg z-10 border border-gray-200\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleDeleteList,className:\"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\" Delete List\"]})})]})]})]}),/*#__PURE__*/_jsx(DndContext,{sensors:sensors,collisionDetection:closestCenter,onDragEnd:handleDragEnd,children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 mb-3 max-h-96 overflow-y-auto\",children:/*#__PURE__*/_jsx(SortableContext,{items:cards.map(card=>card.id),strategy:verticalListSortingStrategy,children:cards.map(card=>/*#__PURE__*/_jsx(SortableCard,{card:card,onDelete:()=>handleDeleteCard(card.id),onUpdate:handleCardUpdate},card.id))})})}),showAddCard?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateCard,className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:newCardTitle,onChange:e=>setNewCardTitle(e.target.value),placeholder:\"Enter a title for this card...\",className:\"w-full p-2 border rounded resize-none focus:outline-none focus:ring-2 \".concat(cardErrors.title?'border-red-500 focus:ring-red-500':'border-gray-300 focus:ring-blue-500'),rows:\"2\",autoFocus:true}),cardErrors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:cardErrors.title}),/*#__PURE__*/_jsx(\"textarea\",{value:newCardDescription,onChange:e=>setNewCardDescription(e.target.value),placeholder:\"Enter description (optional)...\",className:\"w-full p-2 border rounded resize-none focus:outline-none focus:ring-2 \".concat(cardErrors.description?'border-red-500 focus:ring-red-500':'border-gray-300 focus:ring-blue-500'),rows:\"1\"}),cardErrors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:cardErrors.description}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:newCardDueDate,onChange:e=>setNewCardDueDate(e.target.value),placeholder:\"Due date (optional)\",className:\"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"}),cardErrors.general&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:cardErrors.general}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\",children:\"Add Card\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setShowAddCard(false);setNewCardTitle('');setNewCardDescription('');setNewCardDueDate('');setCardErrors({});},className:\"flex items-center gap-1 text-gray-600 hover:text-gray-800\",children:[/*#__PURE__*/_jsx(X,{size:16}),\" Cancel\"]})]})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddCard(true),className:\"w-full text-left text-gray-600 hover:text-gray-800 py-2 px-3 rounded hover:bg-gray-200 transition\",children:\"+ Add a card\"}),showExpanded&&/*#__PURE__*/_jsx(ListExpanded,{list:list,onClose:()=>setShowExpanded(false),onDelete:onDelete})]});};export default List;","map":{"version":3,"names":["React","useState","useEffect","DndContext","closestCenter","KeyboardSensor","PointerSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","verticalListSortingStrategy","SortableCard","ListExpanded","getCards","createCard","deleteList","updateCardPositions","MoreVertical","Trash2","X","socketService","jsx","_jsx","jsxs","_jsxs","List","_ref","list","onDelete","dragListeners","cards","setCards","showAddCard","setShowAddCard","newCardTitle","setNewCardTitle","newCardDescription","setNewCardDescription","newCardDueDate","setNewCardDueDate","showMenu","setShowMenu","showExpanded","setShowExpanded","cardErrors","setCardErrors","sensors","coordinateGetter","fetchCards","handleCardCreated","data","listId","id","prev","card","handleCardUpdated","map","_objectSpread","handleCardDeleted","filter","cardId","onCardCreated","onCardUpdated","onCardDeleted","offCardCreated","offCardUpdated","offCardDeleted","error","console","validateCardForm","newErrors","trim","title","length","description","Object","keys","handleCreateCard","e","preventDefault","newCard","emitCardCreated","boardId","board_id","_error$response","_error$response$data","general","response","handleDeleteCard","handleCardUpdate","handleDeleteList","window","confirm","handleDragEnd","event","active","over","oldIndex","findIndex","newIndex","newCards","updatedCards","index","position","list_id","className","children","onClick","size","collisionDetection","onDragEnd","items","strategy","onUpdate","onSubmit","value","onChange","target","placeholder","concat","rows","autoFocus","type","onClose"],"sources":["E:/NgonNguKichBan/ToDo_FontEnd/src/components/List.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';\r\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport SortableCard from './SortableCard';\r\nimport ListExpanded from './ListExpanded';\r\nimport { getCards, createCard, deleteList, updateCardPositions } from '../services/api';\r\nimport { MoreVertical, Trash2, X } from 'lucide-react';\r\nimport socketService from '../services/socketService';\r\n\r\nconst List = ({ list, onDelete, dragListeners }) => {\r\n  const [cards, setCards] = useState([]);\r\n  const [showAddCard, setShowAddCard] = useState(false);\r\n  const [newCardTitle, setNewCardTitle] = useState('');\r\n  const [newCardDescription, setNewCardDescription] = useState('');\r\n  const [newCardDueDate, setNewCardDueDate] = useState('');\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const [showExpanded, setShowExpanded] = useState(false);\r\n  const [cardErrors, setCardErrors] = useState({});\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetchCards();\r\n    \r\n    // Set up WebSocket listeners for real-time card updates\r\n    const handleCardCreated = (data) => {\r\n      if (data.listId === list.id) {\r\n        setCards(prev => [...prev, data.card]);\r\n      }\r\n    };\r\n\r\n    const handleCardUpdated = (data) => {\r\n      if (data.listId === list.id) {\r\n        setCards(prev => prev.map(card => \r\n          card.id === data.card.id ? { ...card, ...data.card } : card\r\n        ));\r\n      }\r\n    };\r\n\r\n    const handleCardDeleted = (data) => {\r\n      if (data.listId === list.id) {\r\n        setCards(prev => prev.filter(card => card.id !== data.cardId));\r\n      }\r\n    };\r\n\r\n    // Set up listeners\r\n    socketService.onCardCreated(handleCardCreated);\r\n    socketService.onCardUpdated(handleCardUpdated);\r\n    socketService.onCardDeleted(handleCardDeleted);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      socketService.offCardCreated(handleCardCreated);\r\n      socketService.offCardUpdated(handleCardUpdated);\r\n      socketService.offCardDeleted(handleCardDeleted);\r\n    };\r\n  }, [list.id]);\r\n\r\n  const fetchCards = async () => {\r\n    try {\r\n      const data = await getCards(list.id);\r\n      setCards(data);\r\n    } catch (error) {\r\n      console.error('Error fetching cards:', error);\r\n    }\r\n  };\r\n\r\n  const validateCardForm = () => {\r\n    const newErrors = {};\r\n    if (!newCardTitle.trim()) {\r\n      newErrors.title = 'Card title is required';\r\n    } else if (newCardTitle.length > 100) {\r\n      newErrors.title = 'Card title must be less than 100 characters';\r\n    }\r\n\r\n    if (newCardDescription && newCardDescription.length > 500) {\r\n      newErrors.description = 'Card description must be less than 500 characters';\r\n    }\r\n\r\n    setCardErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleCreateCard = async (e) => {\r\n    e.preventDefault();\r\n    if (!validateCardForm()) return;\r\n\r\n    try {\r\n      const newCard = await createCard(\r\n        list.id,\r\n        newCardTitle.trim(),\r\n        newCardDescription.trim(),\r\n        'To Do',\r\n        null,\r\n        newCardDueDate || null\r\n      );\r\n      setCards([...cards, newCard]);\r\n      setNewCardTitle('');\r\n      setNewCardDescription('');\r\n      setNewCardDueDate('');\r\n      setCardErrors({});\r\n      setShowAddCard(false);\r\n      \r\n      // Emit WebSocket event for real-time collaboration\r\n      socketService.emitCardCreated({\r\n        boardId: list.board_id,\r\n        listId: list.id,\r\n        card: newCard\r\n      });\r\n    } catch (error) {\r\n      console.error('Error creating card:', error);\r\n      setCardErrors({\r\n        general: 'Error creating card: ' + (error.response?.data?.error || 'Unknown error'),\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDeleteCard = (cardId) => {\r\n    setCards(cards.filter((card) => card.id !== cardId));\r\n  };\r\n\r\n  const handleCardUpdate = () => {\r\n    fetchCards(); // refresh cards\r\n  };\r\n\r\n  const handleDeleteList = async () => {\r\n    if (window.confirm('Are you sure you want to delete this list and all its cards?')) {\r\n      try {\r\n        await deleteList(list.id);\r\n        onDelete(list.id);\r\n      } catch (error) {\r\n        console.error('Error deleting list:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDragEnd = async (event) => {\r\n    const { active, over } = event;\r\n\r\n    if (active.id !== over.id) {\r\n      const oldIndex = cards.findIndex(card => card.id === active.id);\r\n      const newIndex = cards.findIndex(card => card.id === over.id);\r\n\r\n      const newCards = arrayMove(cards, oldIndex, newIndex);\r\n      setCards(newCards);\r\n\r\n      // Update positions in database\r\n      try {\r\n        const updatedCards = newCards.map((card, index) => ({\r\n          id: card.id,\r\n          position: index,\r\n          list_id: list.id\r\n        }));\r\n        await updateCardPositions(updatedCards);\r\n      } catch (error) {\r\n        console.error('Error updating card positions:', error);\r\n        // Revert on error\r\n        setCards(cards);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-shrink-0 w-72 bg-gray-100 rounded-lg p-3 relative group\">\r\n      {/* Drag Handle for List */}\r\n      {dragListeners && (\r\n        <div \r\n          className=\"absolute top-2 left-1 w-1 h-6 bg-gray-400 rounded cursor-grab hover:bg-gray-500 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n          {...dragListeners}\r\n          title=\"Drag to reorder list\"\r\n        />\r\n      )}\r\n      \r\n      <div className=\"flex justify-between items-center mb-3\">\r\n        <h3 className=\"font-semibold text-gray-800\">{list.title}</h3>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => setShowExpanded(true)}\r\n            className=\"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded hover:bg-blue-50 transition\"\r\n            title=\"Expand to 3-column view\"\r\n          >\r\n            Expand\r\n          </button>\r\n          <div className=\"relative\">\r\n            <button\r\n              onClick={() => setShowMenu(!showMenu)}\r\n              className=\"text-gray-500 hover:text-gray-700 p-1\"\r\n            >\r\n              <MoreVertical size={18} />\r\n            </button>\r\n            {showMenu && (\r\n              <div className=\"absolute right-0 mt-2 w-36 bg-white rounded-md shadow-lg z-10 border border-gray-200\">\r\n                <button\r\n                  onClick={handleDeleteList}\r\n                  className=\"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50\"\r\n                >\r\n                  <Trash2 size={16} /> Delete List\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Cards */}\r\n      <DndContext\r\n        sensors={sensors}\r\n        collisionDetection={closestCenter}\r\n        onDragEnd={handleDragEnd}\r\n      >\r\n        <div className=\"space-y-2 mb-3 max-h-96 overflow-y-auto\">\r\n          <SortableContext items={cards.map(card => card.id)} strategy={verticalListSortingStrategy}>\r\n            {cards.map((card) => (\r\n              <SortableCard\r\n                key={card.id}\r\n                card={card}\r\n                onDelete={() => handleDeleteCard(card.id)}\r\n                onUpdate={handleCardUpdate}\r\n              />\r\n            ))}\r\n          </SortableContext>\r\n        </div>\r\n      </DndContext>\r\n\r\n      {/* Add Card Form */}\r\n      {showAddCard ? (\r\n        <form onSubmit={handleCreateCard} className=\"space-y-2\">\r\n          <textarea\r\n            value={newCardTitle}\r\n            onChange={(e) => setNewCardTitle(e.target.value)}\r\n            placeholder=\"Enter a title for this card...\"\r\n            className={`w-full p-2 border rounded resize-none focus:outline-none focus:ring-2 ${\r\n              cardErrors.title\r\n                ? 'border-red-500 focus:ring-red-500'\r\n                : 'border-gray-300 focus:ring-blue-500'\r\n            }`}\r\n            rows=\"2\"\r\n            autoFocus\r\n          />\r\n          {cardErrors.title && <p className=\"text-sm text-red-600\">{cardErrors.title}</p>}\r\n\r\n          <textarea\r\n            value={newCardDescription}\r\n            onChange={(e) => setNewCardDescription(e.target.value)}\r\n            placeholder=\"Enter description (optional)...\"\r\n            className={`w-full p-2 border rounded resize-none focus:outline-none focus:ring-2 ${\r\n              cardErrors.description\r\n                ? 'border-red-500 focus:ring-red-500'\r\n                : 'border-gray-300 focus:ring-blue-500'\r\n            }`}\r\n            rows=\"1\"\r\n          />\r\n          {cardErrors.description && <p className=\"text-sm text-red-600\">{cardErrors.description}</p>}\r\n\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={newCardDueDate}\r\n            onChange={(e) => setNewCardDueDate(e.target.value)}\r\n            placeholder=\"Due date (optional)\"\r\n            className=\"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n\r\n          {cardErrors.general && <p className=\"text-sm text-red-600\">{cardErrors.general}</p>}\r\n\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\"\r\n            >\r\n              Add Card\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setShowAddCard(false);\r\n                setNewCardTitle('');\r\n                setNewCardDescription('');\r\n                setNewCardDueDate('');\r\n                setCardErrors({});\r\n              }}\r\n              className=\"flex items-center gap-1 text-gray-600 hover:text-gray-800\"\r\n            >\r\n              <X size={16} /> Cancel\r\n            </button>\r\n          </div>\r\n        </form>\r\n      ) : (\r\n        <button\r\n          onClick={() => setShowAddCard(true)}\r\n          className=\"w-full text-left text-gray-600 hover:text-gray-800 py-2 px-3 rounded hover:bg-gray-200 transition\"\r\n        >\r\n          + Add a card\r\n        </button>\r\n      )}\r\n\r\n      {/* Expanded View */}\r\n      {showExpanded && (\r\n        <ListExpanded list={list} onClose={() => setShowExpanded(false)} onDelete={onDelete} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default List;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}