{"ast":null,"code":"import _objectSpread from\"E:/NgonNguKichBan/ToDo_FontEnd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{updateCard,deleteCard,getUsers,getCardLabels,createCardLabel,deleteCardLabel,getCardAttachments,uploadCardAttachment,deleteCardAttachment}from'../services/api';import{MoreVertical,Edit3,Trash2,X,Calendar,Tag,Paperclip,Download,File}from'lucide-react';import socketService from'../services/socketService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Card=_ref=>{var _users$find;let{card,onDelete,onUpdate,dragListeners}=_ref;const[isEditing,setIsEditing]=useState(false);const[title,setTitle]=useState(card.title);const[description,setDescription]=useState(card.description||'');const[status,setStatus]=useState(card.status||'To Do');const[assignedTo,setAssignedTo]=useState(card.assigned_to||null);const[dueDate,setDueDate]=useState(card.due_date||'');const[showMenu,setShowMenu]=useState(false);const[users,setUsers]=useState([]);const[labels,setLabels]=useState([]);const[attachments,setAttachments]=useState([]);const[editErrors,setEditErrors]=useState({});const[showLabelForm,setShowLabelForm]=useState(false);const[showAttachmentForm,setShowAttachmentForm]=useState(false);const[newLabel,setNewLabel]=useState('');const[newLabelColor,setNewLabelColor]=useState('#3B82F6');const[uploading,setUploading]=useState(false);useEffect(()=>{fetchUsers();fetchLabels();fetchAttachments();},[card.id]);const fetchUsers=async()=>{try{const usersData=await getUsers();setUsers(usersData);}catch(error){console.error('Error fetching users:',error);}};const fetchLabels=async()=>{try{const labelsData=await getCardLabels(card.id);setLabels(labelsData);}catch(error){console.error('Error fetching labels:',error);}};const fetchAttachments=async()=>{try{const attachmentsData=await getCardAttachments(card.id);setAttachments(attachmentsData);}catch(error){console.error('Error fetching attachments:',error);}};const validateCard=()=>{const newErrors={};if(!title.trim())newErrors.title='Card title is required';else if(title.length>100)newErrors.title='Card title must be less than 100 characters';if(description&&description.length>500)newErrors.description='Card description must be less than 500 characters';setEditErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSave=async()=>{if(!validateCard())return;try{const updatedCard=await updateCard(card.id,title.trim(),description.trim(),status,assignedTo,null,null,dueDate);setIsEditing(false);setEditErrors({});if(onUpdate)onUpdate();socketService.emitCardUpdated({boardId:card.board_id,listId:card.list_id,card:_objectSpread(_objectSpread({},card),updatedCard)});}catch(error){var _error$response,_error$response$data;setEditErrors({general:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Error updating card'});}};const handleDelete=async()=>{if(window.confirm('Are you sure you want to delete this card?')){try{await deleteCard(card.id);onDelete(card.id);socketService.emitCardDeleted({boardId:card.board_id,listId:card.list_id,cardId:card.id});}catch(error){console.error('Error deleting card:',error);}}};const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('vi-VN',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};const formatDueDate=dateString=>{if(!dateString)return'';const date=new Date(dateString);const now=new Date();const diffDays=Math.ceil((date-now)/(1000*60*60*24));if(diffDays<0)return\"Overdue by \".concat(Math.abs(diffDays),\" days\");if(diffDays===0)return'Due today';if(diffDays===1)return'Due tomorrow';return\"Due in \".concat(diffDays,\" days\");};const getStatusColor=status=>{switch(status){case'To Do':return'bg-gray-100 text-gray-800';case'In Progress':return'bg-yellow-100 text-yellow-800';case'Done':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};const handleAddLabel=async()=>{if(!newLabel.trim())return;try{await createCardLabel(card.id,newLabel.trim(),newLabelColor);setNewLabel('');setNewLabelColor('#3B82F6');setShowLabelForm(false);fetchLabels();}catch(error){var _error$response2,_error$response2$data;console.error('Error adding label:',error);alert('Error adding label: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Unknown error'));}};const handleDeleteLabel=async labelId=>{try{await deleteCardLabel(labelId);fetchLabels();}catch(error){console.error('Error deleting label:',error);}};// ==========================\n// Editing Mode\n// ==========================\nif(isEditing){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 shadow-md border border-gray-200 space-y-2\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:title,onChange:e=>setTitle(e.target.value),className:\"w-full p-2 border rounded-md resize-none focus:outline-none focus:ring-2 \".concat(editErrors.title?'border-red-500 focus:ring-red-500':'border-gray-300 focus:ring-blue-500'),rows:\"2\",placeholder:\"Card title...\"}),editErrors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:editErrors.title}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Add description...\",className:\"w-full p-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:\"2\"}),/*#__PURE__*/_jsxs(\"select\",{value:status,onChange:e=>setStatus(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"To Do\",children:\"To Do\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In Progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Done\",children:\"Done\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:assignedTo||'',onChange:e=>setAssignedTo(e.target.value?parseInt(e.target.value):null),className:\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"No one assigned\"}),users.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.username},user.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:dueDate,onChange:e=>setDueDate(e.target.value),className:\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),editErrors.general&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:editErrors.general}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 transition\",children:\"Save\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(false),className:\"flex items-center gap-1 text-gray-600 hover:text-gray-800 text-sm\",children:[/*#__PURE__*/_jsx(X,{size:16}),\" Cancel\"]})]})]});}// ==========================\n// Normal Mode\n// ==========================\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 shadow-sm border border-gray-200 hover:shadow-md transition cursor-pointer group relative\",children:[dragListeners&&/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({className:\"absolute left-1 top-1/2 -translate-y-1/2 w-2 h-8 bg-gray-300 rounded cursor-grab hover:bg-gray-400 opacity-0 group-hover:opacity-100 transition\"},dragListeners),{},{title:\"Drag to reorder\"})),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 text-sm truncate\",children:card.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 rounded-full text-xs font-medium \".concat(getStatusColor(card.status)),children:card.status}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();setShowMenu(!showMenu);},className:\"p-1 rounded-full hover:bg-gray-100 text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(MoreVertical,{size:16})})]})]}),card.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs mb-2\",children:card.description}),card.due_date&&/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center text-xs font-medium px-2 py-0.5 rounded-full mb-2 \".concat(getStatusColor(card.status)),children:[/*#__PURE__*/_jsx(Calendar,{size:12,className:\"mr-1\"}),formatDueDate(card.due_date)]}),attachments.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-gray-600 font-medium mb-1\",children:[/*#__PURE__*/_jsx(Paperclip,{size:12,className:\"mr-1\"}),\" Attachments (\",attachments.length,\")\"]}),attachments.slice(0,2).map(att=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-2 py-1 rounded border border-gray-200 bg-gray-50 hover:bg-gray-100 transition\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(File,{size:14,className:\"mr-1 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate text-xs text-gray-700\",title:att.original_name,children:att.original_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-400 ml-2\",children:[\"(\",(att.file_size/1024).toFixed(2),\" KB)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"a\",{href:att.file_path,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-500 hover:text-blue-700\",children:/*#__PURE__*/_jsx(Download,{size:14})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(att.id),className:\"text-red-500 hover:text-red-700\",children:/*#__PURE__*/_jsx(X,{size:14})})]})]},att.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center text-xs text-gray-400\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Created: \",formatDate(card.created_at)]}),card.assigned_to&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-100 text-blue-800 px-2 py-0.5 rounded\",children:((_users$find=users.find(u=>u.id===card.assigned_to))===null||_users$find===void 0?void 0:_users$find.username)||'Unknown'})]}),showMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-8 right-2 w-40 bg-white rounded-md shadow-lg z-10 border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setIsEditing(true);setShowMenu(false);},className:\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(Edit3,{size:16}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowLabelForm(true);setShowMenu(false);},className:\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(Tag,{size:16}),\" Add Label\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowAttachmentForm(true);setShowMenu(false);},className:\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(Paperclip,{size:16}),\" Add File\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{handleDelete();setShowMenu(false);},className:\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\" Delete\"]})]}),showLabelForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-8 right-2 w-64 bg-white rounded-md shadow-lg z-20 border border-gray-200 p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium mb-2\",children:\"Add Label\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newLabel,onChange:e=>setNewLabel(e.target.value),placeholder:\"Label text\",className:\"w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 mb-3\",children:['#3B82F6','#EF4444','#10B981','#F59E0B','#8B5CF6','#EC4899'].map(color=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewLabelColor(color),className:\"w-6 h-6 rounded-full border-2 \".concat(newLabelColor===color?'border-gray-800':'border-gray-300'),style:{backgroundColor:color}},color))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddLabel,className:\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\",children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowLabelForm(false);setNewLabel('');setNewLabelColor('#3B82F6');},className:\"bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-400\",children:\"Cancel\"})]})]})]});};export default Card;","map":{"version":3,"names":["React","useState","useEffect","updateCard","deleteCard","getUsers","getCardLabels","createCardLabel","deleteCardLabel","getCardAttachments","uploadCardAttachment","deleteCardAttachment","MoreVertical","Edit3","Trash2","X","Calendar","Tag","Paperclip","Download","File","socketService","jsx","_jsx","jsxs","_jsxs","Card","_ref","_users$find","card","onDelete","onUpdate","dragListeners","isEditing","setIsEditing","title","setTitle","description","setDescription","status","setStatus","assignedTo","setAssignedTo","assigned_to","dueDate","setDueDate","due_date","showMenu","setShowMenu","users","setUsers","labels","setLabels","attachments","setAttachments","editErrors","setEditErrors","showLabelForm","setShowLabelForm","showAttachmentForm","setShowAttachmentForm","newLabel","setNewLabel","newLabelColor","setNewLabelColor","uploading","setUploading","fetchUsers","fetchLabels","fetchAttachments","id","usersData","error","console","labelsData","attachmentsData","validateCard","newErrors","trim","length","Object","keys","handleSave","updatedCard","emitCardUpdated","boardId","board_id","listId","list_id","_objectSpread","_error$response","_error$response$data","general","response","data","handleDelete","window","confirm","emitCardDeleted","cardId","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","formatDueDate","now","diffDays","Math","ceil","concat","abs","getStatusColor","handleAddLabel","_error$response2","_error$response2$data","alert","handleDeleteLabel","labelId","className","children","value","onChange","e","target","rows","placeholder","parseInt","map","user","username","type","onClick","size","stopPropagation","slice","att","original_name","file_size","toFixed","href","file_path","rel","created_at","find","u","color","style","backgroundColor"],"sources":["E:/NgonNguKichBan/ToDo_FontEnd/src/components/Card.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { updateCard, deleteCard, getUsers, getCardLabels, createCardLabel, deleteCardLabel, getCardAttachments, uploadCardAttachment, deleteCardAttachment } from '../services/api';\r\nimport { MoreVertical, Edit3, Trash2, X, Calendar, Tag, Paperclip, Download, File } from 'lucide-react';\r\nimport socketService from '../services/socketService';\r\n\r\nconst Card = ({ card, onDelete, onUpdate, dragListeners }) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [title, setTitle] = useState(card.title);\r\n  const [description, setDescription] = useState(card.description || '');\r\n  const [status, setStatus] = useState(card.status || 'To Do');\r\n  const [assignedTo, setAssignedTo] = useState(card.assigned_to || null);\r\n  const [dueDate, setDueDate] = useState(card.due_date || '');\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const [users, setUsers] = useState([]);\r\n  const [labels, setLabels] = useState([]);\r\n  const [attachments, setAttachments] = useState([]);\r\n  const [editErrors, setEditErrors] = useState({});\r\n  const [showLabelForm, setShowLabelForm] = useState(false);\r\n  const [showAttachmentForm, setShowAttachmentForm] = useState(false);\r\n  const [newLabel, setNewLabel] = useState('');\r\n  const [newLabelColor, setNewLabelColor] = useState('#3B82F6');\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchLabels();\r\n    fetchAttachments();\r\n  }, [card.id]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const usersData = await getUsers();\r\n      setUsers(usersData);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n    }\r\n  };\r\n\r\n  const fetchLabels = async () => {\r\n    try {\r\n      const labelsData = await getCardLabels(card.id);\r\n      setLabels(labelsData);\r\n    } catch (error) {\r\n      console.error('Error fetching labels:', error);\r\n    }\r\n  };\r\n\r\n  const fetchAttachments = async () => {\r\n    try {\r\n      const attachmentsData = await getCardAttachments(card.id);\r\n      setAttachments(attachmentsData);\r\n    } catch (error) {\r\n      console.error('Error fetching attachments:', error);\r\n    }\r\n  };\r\n\r\n  const validateCard = () => {\r\n    const newErrors = {};\r\n    if (!title.trim()) newErrors.title = 'Card title is required';\r\n    else if (title.length > 100) newErrors.title = 'Card title must be less than 100 characters';\r\n    if (description && description.length > 500) newErrors.description = 'Card description must be less than 500 characters';\r\n    setEditErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!validateCard()) return;\r\n    try {\r\n      const updatedCard = await updateCard(card.id, title.trim(), description.trim(), status, assignedTo, null, null, dueDate);\r\n      setIsEditing(false);\r\n      setEditErrors({});\r\n      if (onUpdate) onUpdate();\r\n      socketService.emitCardUpdated({\r\n        boardId: card.board_id,\r\n        listId: card.list_id,\r\n        card: { ...card, ...updatedCard }\r\n      });\r\n    } catch (error) {\r\n      setEditErrors({ general: error.response?.data?.error || 'Error updating card' });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm('Are you sure you want to delete this card?')) {\r\n      try {\r\n        await deleteCard(card.id);\r\n        onDelete(card.id);\r\n        socketService.emitCardDeleted({\r\n          boardId: card.board_id,\r\n          listId: card.list_id,\r\n          cardId: card.id\r\n        });\r\n      } catch (error) {\r\n        console.error('Error deleting card:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('vi-VN', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const formatDueDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffDays = Math.ceil((date - now) / (1000 * 60 * 60 * 24));\r\n    if (diffDays < 0) return `Overdue by ${Math.abs(diffDays)} days`;\r\n    if (diffDays === 0) return 'Due today';\r\n    if (diffDays === 1) return 'Due tomorrow';\r\n    return `Due in ${diffDays} days`;\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'To Do': return 'bg-gray-100 text-gray-800';\r\n      case 'In Progress': return 'bg-yellow-100 text-yellow-800';\r\n      case 'Done': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const handleAddLabel = async () => {\r\n    if (!newLabel.trim()) return;\r\n\r\n    try {\r\n      await createCardLabel(card.id, newLabel.trim(), newLabelColor);\r\n      setNewLabel('');\r\n      setNewLabelColor('#3B82F6');\r\n      setShowLabelForm(false);\r\n      fetchLabels();\r\n    } catch (error) {\r\n      console.error('Error adding label:', error);\r\n      alert('Error adding label: ' + (error.response?.data?.error || 'Unknown error'));\r\n    }\r\n  };\r\n\r\n  const handleDeleteLabel = async (labelId) => {\r\n    try {\r\n      await deleteCardLabel(labelId);\r\n      fetchLabels();\r\n    } catch (error) {\r\n      console.error('Error deleting label:', error);\r\n    }\r\n  };\r\n\r\n  // ==========================\r\n  // Editing Mode\r\n  // ==========================\r\n  if (isEditing) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg p-4 shadow-md border border-gray-200 space-y-2\">\r\n        <textarea\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          className={`w-full p-2 border rounded-md resize-none focus:outline-none focus:ring-2 ${\r\n            editErrors.title ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-blue-500'\r\n          }`}\r\n          rows=\"2\"\r\n          placeholder=\"Card title...\"\r\n        />\r\n        {editErrors.title && <p className=\"text-red-600 text-sm\">{editErrors.title}</p>}\r\n\r\n        <textarea\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          placeholder=\"Add description...\"\r\n          className=\"w-full p-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          rows=\"2\"\r\n        />\r\n\r\n        <select\r\n          value={status}\r\n          onChange={(e) => setStatus(e.target.value)}\r\n          className=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"To Do\">To Do</option>\r\n          <option value=\"In Progress\">In Progress</option>\r\n          <option value=\"Done\">Done</option>\r\n        </select>\r\n\r\n        <select\r\n          value={assignedTo || ''}\r\n          onChange={(e) => setAssignedTo(e.target.value ? parseInt(e.target.value) : null)}\r\n          className=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        >\r\n          <option value=\"\">No one assigned</option>\r\n          {users.map((user) => (\r\n            <option key={user.id} value={user.id}>\r\n              {user.username}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <input\r\n          type=\"datetime-local\"\r\n          value={dueDate}\r\n          onChange={(e) => setDueDate(e.target.value)}\r\n          className=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n\r\n        {editErrors.general && <p className=\"text-red-600 text-sm\">{editErrors.general}</p>}\r\n\r\n        <div className=\"flex justify-end gap-2\">\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 transition\"\r\n          >\r\n            Save\r\n          </button>\r\n          <button\r\n            onClick={() => setIsEditing(false)}\r\n            className=\"flex items-center gap-1 text-gray-600 hover:text-gray-800 text-sm\"\r\n          >\r\n            <X size={16} /> Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ==========================\r\n  // Normal Mode\r\n  // ==========================\r\n  return (\r\n    <div className=\"bg-white rounded-lg p-4 shadow-sm border border-gray-200 hover:shadow-md transition cursor-pointer group relative\">\r\n      {/* Drag Handle */}\r\n      {dragListeners && (\r\n        <div\r\n          className=\"absolute left-1 top-1/2 -translate-y-1/2 w-2 h-8 bg-gray-300 rounded cursor-grab hover:bg-gray-400 opacity-0 group-hover:opacity-100 transition\"\r\n          {...dragListeners}\r\n          title=\"Drag to reorder\"\r\n        />\r\n      )}\r\n\r\n      {/* Header: Title + Status + Menu */}\r\n      <div className=\"flex items-start justify-between mb-2\">\r\n        <h4 className=\"font-medium text-gray-900 text-sm truncate\">{card.title}</h4>\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${getStatusColor(card.status)}`}>\r\n            {card.status}\r\n          </span>\r\n          <button\r\n            onClick={(e) => { e.stopPropagation(); setShowMenu(!showMenu); }}\r\n            className=\"p-1 rounded-full hover:bg-gray-100 text-gray-500 hover:text-gray-700\"\r\n          >\r\n            <MoreVertical size={16} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Description */}\r\n      {card.description && <p className=\"text-gray-600 text-xs mb-2\">{card.description}</p>}\r\n\r\n      {/* Due Date */}\r\n      {card.due_date && (\r\n        <div className={`inline-flex items-center text-xs font-medium px-2 py-0.5 rounded-full mb-2 ${getStatusColor(card.status)}`}>\r\n          <Calendar size={12} className=\"mr-1\" />\r\n          {formatDueDate(card.due_date)}\r\n        </div>\r\n      )}\r\n\r\n      {/* Attachments */}\r\n      {attachments.length > 0 && (\r\n        <div className=\"space-y-1 mb-2\">\r\n          <div className=\"flex items-center text-xs text-gray-600 font-medium mb-1\">\r\n            <Paperclip size={12} className=\"mr-1\" /> Attachments ({attachments.length})\r\n          </div>\r\n          {attachments.slice(0, 2).map((att) => (\r\n            <div key={att.id} className=\"flex items-center justify-between px-2 py-1 rounded border border-gray-200 bg-gray-50 hover:bg-gray-100 transition\">\r\n              <div className=\"flex items-center flex-1 min-w-0\">\r\n                <File size={14} className=\"mr-1 text-gray-500\" />\r\n                <span className=\"truncate text-xs text-gray-700\" title={att.original_name}>{att.original_name}</span>\r\n                <span className=\"text-xs text-gray-400 ml-2\">({(att.file_size / 1024).toFixed(2)} KB)</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n                <a href={att.file_path} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-500 hover:text-blue-700\">\r\n                  <Download size={14} />\r\n                </a>\r\n                <button onClick={() => handleDelete(att.id)} className=\"text-red-500 hover:text-red-700\">\r\n                  <X size={14} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Footer */}\r\n      <div className=\"flex justify-between items-center text-xs text-gray-400\">\r\n        <span>Created: {formatDate(card.created_at)}</span>\r\n        {card.assigned_to && (\r\n          <span className=\"bg-blue-100 text-blue-800 px-2 py-0.5 rounded\">\r\n            {users.find((u) => u.id === card.assigned_to)?.username || 'Unknown'}\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Menu */}\r\n      {showMenu && (\r\n        <div className=\"absolute top-8 right-2 w-40 bg-white rounded-md shadow-lg z-10 border border-gray-200\">\r\n          <button onClick={() => { setIsEditing(true); setShowMenu(false); }}\r\n            className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\">\r\n            <Edit3 size={16} /> Edit\r\n          </button>\r\n          <button onClick={() => { setShowLabelForm(true); setShowMenu(false); }}\r\n            className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\">\r\n            <Tag size={16} /> Add Label\r\n          </button>\r\n          <button onClick={() => { setShowAttachmentForm(true); setShowMenu(false); }}\r\n            className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\">\r\n            <Paperclip size={16} /> Add File\r\n          </button>\r\n          <button onClick={() => { handleDelete(); setShowMenu(false); }}\r\n            className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-50\">\r\n            <Trash2 size={16} /> Delete\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Label Form */}\r\n      {showLabelForm && (\r\n        <div className=\"absolute top-8 right-2 w-64 bg-white rounded-md shadow-lg z-20 border border-gray-200 p-3\">\r\n          <h4 className=\"text-sm font-medium mb-2\">Add Label</h4>\r\n          <input\r\n            type=\"text\"\r\n            value={newLabel}\r\n            onChange={(e) => setNewLabel(e.target.value)}\r\n            placeholder=\"Label text\"\r\n            className=\"w-full p-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2\"\r\n          />\r\n          <div className=\"flex flex-wrap gap-1 mb-3\">\r\n            {['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899'].map((color) => (\r\n              <button\r\n                key={color}\r\n                onClick={() => setNewLabelColor(color)}\r\n                className={`w-6 h-6 rounded-full border-2 ${\r\n                  newLabelColor === color ? 'border-gray-800' : 'border-gray-300'\r\n                }`}\r\n                style={{ backgroundColor: color }}\r\n              />\r\n            ))}\r\n          </div>\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={handleAddLabel}\r\n              className=\"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600\"\r\n            >\r\n              Add\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowLabelForm(false);\r\n                setNewLabel('');\r\n                setNewLabelColor('#3B82F6');\r\n              }}\r\n              className=\"bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-400\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}