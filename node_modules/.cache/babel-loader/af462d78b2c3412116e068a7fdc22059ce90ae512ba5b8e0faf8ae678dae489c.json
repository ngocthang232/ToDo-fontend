{"ast":null,"code":"var _jsxFileName = \"E:\\\\NgonNguKichBan\\\\ToDo_FontEnd\\\\src\\\\components\\\\OnlineUsers.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Users, Wifi, WifiOff } from 'lucide-react';\nimport socketService from '../services/socketService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OnlineUsers = ({\n  boardId\n}) => {\n  _s();\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [isConnected, setIsConnected] = useState(false);\n  useEffect(() => {\n    var _socketService$socket, _socketService$socket2;\n    if (!boardId) return;\n\n    // Join board room\n    socketService.joinBoard(boardId);\n\n    // Event listeners\n    const handleUserJoined = user => {\n      setOnlineUsers(prev => {\n        const exists = prev.find(u => u.userId === user.userId);\n        if (!exists) {\n          return [...prev, user];\n        }\n        return prev;\n      });\n    };\n    const handleUserLeft = user => {\n      setOnlineUsers(prev => prev.filter(u => u.userId !== user.userId));\n    };\n    const handleConnect = () => {\n      setIsConnected(true);\n    };\n    const handleDisconnect = () => {\n      setIsConnected(false);\n      setOnlineUsers([]);\n    };\n\n    // Set up listeners\n    socketService.onUserJoined(handleUserJoined);\n    socketService.onUserLeft(handleUserLeft);\n    (_socketService$socket = socketService.socket) === null || _socketService$socket === void 0 ? void 0 : _socketService$socket.on('connect', handleConnect);\n    (_socketService$socket2 = socketService.socket) === null || _socketService$socket2 === void 0 ? void 0 : _socketService$socket2.on('disconnect', handleDisconnect);\n\n    // Cleanup\n    return () => {\n      var _socketService$socket3, _socketService$socket4;\n      socketService.offUserJoined(handleUserJoined);\n      socketService.offUserLeft(handleUserLeft);\n      (_socketService$socket3 = socketService.socket) === null || _socketService$socket3 === void 0 ? void 0 : _socketService$socket3.off('connect', handleConnect);\n      (_socketService$socket4 = socketService.socket) === null || _socketService$socket4 === void 0 ? void 0 : _socketService$socket4.off('disconnect', handleDisconnect);\n      socketService.leaveBoard(boardId);\n    };\n  }, [boardId]);\n  if (!isConnected) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 text-gray-500\",\n      children: [/*#__PURE__*/_jsxDEV(WifiOff, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm\",\n        children: \"Offline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-1\",\n      children: [/*#__PURE__*/_jsxDEV(Wifi, {\n        size: 16,\n        className: \"text-green-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Users, {\n        size: 16,\n        className: \"text-gray-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm text-gray-600\",\n        children: [onlineUsers.length + 1, \" online\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), onlineUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex -space-x-2\",\n      children: [onlineUsers.slice(0, 3).map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium border-2 border-white\",\n        title: user.username,\n        children: user.username.charAt(0).toUpperCase()\n      }, user.userId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)), onlineUsers.length > 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center text-white text-xs font-medium border-2 border-white\",\n        children: [\"+\", onlineUsers.length - 3]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(OnlineUsers, \"Gr1YbB9Eq1wkbq7B5YNLLHg6F/w=\");\n_c = OnlineUsers;\nexport default OnlineUsers;\nvar _c;\n$RefreshReg$(_c, \"OnlineUsers\");","map":{"version":3,"names":["React","useState","useEffect","Users","Wifi","WifiOff","socketService","jsxDEV","_jsxDEV","OnlineUsers","boardId","_s","onlineUsers","setOnlineUsers","isConnected","setIsConnected","_socketService$socket","_socketService$socket2","joinBoard","handleUserJoined","user","prev","exists","find","u","userId","handleUserLeft","filter","handleConnect","handleDisconnect","onUserJoined","onUserLeft","socket","on","_socketService$socket3","_socketService$socket4","offUserJoined","offUserLeft","off","leaveBoard","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","length","slice","map","title","username","charAt","toUpperCase","_c","$RefreshReg$"],"sources":["E:/NgonNguKichBan/ToDo_FontEnd/src/components/OnlineUsers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Users, Wifi, WifiOff } from 'lucide-react';\r\nimport socketService from '../services/socketService';\r\n\r\nconst OnlineUsers = ({ boardId }) => {\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!boardId) return;\r\n\r\n    // Join board room\r\n    socketService.joinBoard(boardId);\r\n\r\n    // Event listeners\r\n    const handleUserJoined = (user) => {\r\n      setOnlineUsers(prev => {\r\n        const exists = prev.find(u => u.userId === user.userId);\r\n        if (!exists) {\r\n          return [...prev, user];\r\n        }\r\n        return prev;\r\n      });\r\n    };\r\n\r\n    const handleUserLeft = (user) => {\r\n      setOnlineUsers(prev => prev.filter(u => u.userId !== user.userId));\r\n    };\r\n\r\n    const handleConnect = () => {\r\n      setIsConnected(true);\r\n    };\r\n\r\n    const handleDisconnect = () => {\r\n      setIsConnected(false);\r\n      setOnlineUsers([]);\r\n    };\r\n\r\n    // Set up listeners\r\n    socketService.onUserJoined(handleUserJoined);\r\n    socketService.onUserLeft(handleUserLeft);\r\n    socketService.socket?.on('connect', handleConnect);\r\n    socketService.socket?.on('disconnect', handleDisconnect);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      socketService.offUserJoined(handleUserJoined);\r\n      socketService.offUserLeft(handleUserLeft);\r\n      socketService.socket?.off('connect', handleConnect);\r\n      socketService.socket?.off('disconnect', handleDisconnect);\r\n      socketService.leaveBoard(boardId);\r\n    };\r\n  }, [boardId]);\r\n\r\n  if (!isConnected) {\r\n    return (\r\n      <div className=\"flex items-center space-x-2 text-gray-500\">\r\n        <WifiOff size={16} />\r\n        <span className=\"text-sm\">Offline</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center space-x-2\">\r\n      <div className=\"flex items-center space-x-1\">\r\n        <Wifi size={16} className=\"text-green-500\" />\r\n        <Users size={16} className=\"text-gray-600\" />\r\n        <span className=\"text-sm text-gray-600\">\r\n          {onlineUsers.length + 1} online\r\n        </span>\r\n      </div>\r\n      \r\n      {onlineUsers.length > 0 && (\r\n        <div className=\"flex -space-x-2\">\r\n          {onlineUsers.slice(0, 3).map((user) => (\r\n            <div\r\n              key={user.userId}\r\n              className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium border-2 border-white\"\r\n              title={user.username}\r\n            >\r\n              {user.username.charAt(0).toUpperCase()}\r\n            </div>\r\n          ))}\r\n          {onlineUsers.length > 3 && (\r\n            <div className=\"w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center text-white text-xs font-medium border-2 border-white\">\r\n              +{onlineUsers.length - 3}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OnlineUsers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}